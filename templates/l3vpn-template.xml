<config-template xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{/dev1}</name>
      <config>
        <vrf xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <vrf-list>
            <name>{/vrf}</name>
            <address-family>
              <ipv4>
                <unicast>
                  <import>
                    <route-target>
                      <address-list>
                        <name>{/rt_rd}</name>
                      </address-list>
                    </route-target>
                  </import>
                  <export>
                    <route-policy>{/color}</route-policy>
                    <route-target>
                      <address-list>
                        <name>{/rt_rd}</name>
                      </address-list>
                    </route-target>
                  </export>
                </unicast>
              </ipv4>
            </address-family>
          </vrf-list>
        </vrf>
        <interface xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <GigabitEthernet>
            <id>0/0/0/{/dev1-port}</id>
            <vrf>{/vrf}</vrf>
            <ipv4>
              <address>
                <ip>{/dev1-addr}</ip>
                <mask>255.255.255.0</mask>
              </address>
            </ipv4>
            <shutdown tags="delete"/>
          </GigabitEthernet>
        </interface>
        <router xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <bgp>
            <bgp-no-instance>
              <id>100</id>
              <vrf>
                <name>{/vrf}</name>
                <rd>{/rt_rd}</rd>
                <address-family>
                  <ipv4>
                    <unicast>
                      <redistribute>
                        <connected/>
                      </redistribute>
                    </unicast>
                  </ipv4>
                </address-family>
              </vrf>
            </bgp-no-instance>
          </bgp>
        </router>
      </config>
    </device>
    <device>
      <name>{/dev2}</name>
      <config>
        <vrf xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <vrf-list>
            <name>{/vrf}</name>
            <address-family>
              <ipv4>
                <unicast>
                  <import>
                    <route-target>
                      <address-list>
                        <name>{/rt_rd}</name>
                      </address-list>
                    </route-target>
                  </import>
                  <export>
                    <route-policy>{/color}</route-policy>
                    <route-target>
                      <address-list>
                        <name>{/rt_rd}</name>
                      </address-list>
                    </route-target>
                  </export>
                </unicast>
              </ipv4>
            </address-family>
          </vrf-list>
        </vrf>
        <interface xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <GigabitEthernet>
            <id>0/0/0/{/dev2-port}</id>
            <vrf>{/vrf}</vrf>
            <ipv4>
              <address>
                <ip>{/dev2-addr}</ip>
                <mask>255.255.255.0</mask>
              </address>
            </ipv4>
            <shutdown tags="delete"/>
          </GigabitEthernet>
        </interface>
        <router xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <bgp>
            <bgp-no-instance>
              <id>100</id>
              <vrf>
                <name>{/vrf}</name>
                <rd>{rt_rd}</rd>
                <address-family>
                  <ipv4>
                    <unicast>
                      <redistribute>
                        <connected/>
                      </redistribute>
                    </unicast>
                  </ipv4>
                </address-family>
              </vrf>
            </bgp-no-instance>
          </bgp>
        </router>
      </config>
    </device>
    <device>
      <name>{/dev1}</name>
      <config>
        <configuration xmlns="http://xml.juniper.net/xnm/1.1/xnm">
          <interfaces>
            <interface>
              <name>xe-0/0/{/dev1-port}</name>
              <unit>
                <name>0</name>
                <family>
                  <inet>
                    <address>
                      <name>{/dev1-addr}/24</name>
                    </address>
                  </inet>
                </family>
              </unit>
            </interface>
          </interfaces>
          <routing-instances>
            <instance>
              <name>{/vrf}</name>
              <instance-type>vrf</instance-type>
              <interface>
                <name>xe-0/0/{/dev1-port}.0</name>
              </interface>
              <route-distinguisher>
                <rd-type>{/rt_rd}</rd-type>
              </route-distinguisher>
              <vrf-export>POLICY_{/color}</vrf-export>
              <vrf-target>
                <import>{/rt_rd}</import>
                <export>{/rt_rd}</export>
              </vrf-target>
            </instance>
          </routing-instances>
        </configuration>
      </config>
    </device>
  </devices>
</config-template>
